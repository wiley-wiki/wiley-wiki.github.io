(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{789:function(s,t,a){"use strict";a.r(t);var e=a(95),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"什么是运行模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是运行模式"}},[s._v("#")]),s._v(" 什么是运行模式")]),s._v(" "),a("p",[s._v("MySQL运行模式是可以使用不同的模式，"),a("code",[s._v("宽松模式")]),s._v("和"),a("code",[s._v("严格模式")])]),s._v(" "),a("p",[s._v("MySQL5.7版本之前SQL运行为宽松模式，开放不严谨的模式去运行")]),s._v(" "),a("p",[s._v("MySQL5.7版本之后SQL运行为严格模式，有可能在升级数据库时，数据库的操作出现问题")]),s._v(" "),a("h2",{attrs:{id:"模式使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模式使用"}},[s._v("#")]),s._v(" 模式使用")]),s._v(" "),a("h3",{attrs:{id:"查看当前运行的模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看当前运行的模式"}},[s._v("#")]),s._v(" 查看当前运行的模式")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" @"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@sql_mode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-------------------------------------------------------------------------------------------------------------------------------------------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" @"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@sql_mode")]),s._v("                                                                                                                                "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-------------------------------------------------------------------------------------------------------------------------------------------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ONLY_FULL_GROUP_BY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("STRICT_TRANS_TABLES"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("NO_ZERO_IN_DATE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("NO_ZERO_DATE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("ERROR_FOR_DIVISION_BY_ZERO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("NO_AUTO_CREATE_USER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("NO_ENGINE_SUBSTITUTION "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-------------------------------------------------------------------------------------------------------------------------------------------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"模式参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模式参数"}},[s._v("#")]),s._v(" 模式参数")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("参数")]),s._v(" "),a("th",[s._v("说明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("ONLY_FULL_GROUP_BY")]),s._v(" "),a("td",[s._v("结果中的字段需要在 GROUP BY 中出现")])]),s._v(" "),a("tr",[a("td",[s._v("STRICT_TRANS_TABLES")]),s._v(" "),a("td",[s._v("如果一个值不能插入到一个事务表中，则中断当前的操作")])]),s._v(" "),a("tr",[a("td",[s._v("NO_ZERO_IN_DATE")]),s._v(" "),a("td",[s._v("不能插入为0的日期和月份")])]),s._v(" "),a("tr",[a("td",[s._v("NO_ZERO_DATE")]),s._v(" "),a("td",[s._v("不能添加 0000-00-00 格式的日期")])]),s._v(" "),a("tr",[a("td",[s._v("ERROR_FOR_DIVISION_BY_ZERO")]),s._v(" "),a("td",[s._v("除数不能为零，禁止该模式后插入的结果为NULL")])])])]),s._v(" "),a("h3",{attrs:{id:"模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模式"}},[s._v("#")]),s._v(" 模式")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("模式")]),s._v(" "),a("th",[s._v("说明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("ANSI")]),s._v(" "),a("td",[s._v("宽松模式，对长度超过字段定义等错误进行截取等操作。报Waring警告错误")])]),s._v(" "),a("tr",[a("td",[s._v("TRADITIONAL")]),s._v(" "),a("td",[s._v("严格模式，对数据进行严格校验，事务处理中会进行事务回滚操作。非事务时，发生错误时会报错终止，会有部分数据插入。")])])])]),s._v(" "),a("h4",{attrs:{id:"设置会话宽松模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置会话宽松模式"}},[s._v("#")]),s._v(" 设置会话宽松模式")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("session")]),s._v(" sql_mode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ANSI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" sql_mode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ANSI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("上面两种方法都可设置宽松模式")]),s._v(" "),a("h4",{attrs:{id:"设置全局宽松模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置全局宽松模式"}},[s._v("#")]),s._v(" 设置全局宽松模式")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("global")]),s._v(" sql_mode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ANSI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"模式比较"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模式比较"}},[s._v("#")]),s._v(" 模式比较")]),s._v(" "),a("h3",{attrs:{id:"宽松模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#宽松模式"}},[s._v("#")]),s._v(" 宽松模式")]),s._v(" "),a("p",[s._v("在宽松模式下，可以插入"),a("code",[s._v("'0000-00-00'")]),s._v(" 日期格式")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" students "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" birthday "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0000-00-00'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在宽松模式下，内容超过字段长度则会进行截断并且正常插入数据，字段使用的是 "),a("code",[s._v("smallint")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" students "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" rank "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"严格模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#严格模式"}},[s._v("#")]),s._v(" 严格模式")]),s._v(" "),a("p",[s._v("在严格模式下，则不可以插入"),a("code",[s._v("'0000-00-00'")]),s._v(" 日期格式")]),s._v(" "),a("p",[s._v("在严格模式下，插入内容超过字段长度的数据时会报错")]),s._v(" "),a("h2",{attrs:{id:"only-full-group-by"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#only-full-group-by"}},[s._v("#")]),s._v(" ONLY_FULL_GROUP_BY")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("min")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" students"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nERROR "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1140")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("In")]),s._v(" aggregated query without "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" expression "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2 of SELECT list contains nonaggregated column 'teacher.students.id'; this is incompatible with sql_mode=only_full_group_by")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"解决方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决方法"}},[s._v("#")]),s._v(" 解决方法")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" sql_mode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@sql_mode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ONLY_FULL_GROUP_BY'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);